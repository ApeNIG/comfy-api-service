# ComfyUI API Service - Environment Configuration
# Copy this file to .env and customize the values

# ===================================================================
# Redis Configuration
# ===================================================================
REDIS_URL=redis://localhost:6379
REDIS_PREFIX=cui

# ===================================================================
# ARQ (Job Queue) Configuration
# ===================================================================
ARQ_QUEUE_NAME=default
ARQ_MAX_JOBS=1000
ARQ_WORKER_CONCURRENCY=5

# ===================================================================
# Job Settings
# ===================================================================
JOB_TIMEOUT=1200  # 20 minutes max per job
MAX_BATCH_SIZE=10  # Max images per batch
MAX_MEGAPIXELS=4  # 2048x2048 ~ 4.2MP

# ===================================================================
# Storage Configuration (MinIO/S3)
# ===================================================================
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=comfyui-artifacts
MINIO_SECURE=false  # Use HTTPS (true for AWS S3, false for local MinIO)
ARTIFACT_URL_TTL=3600  # 1 hour for presigned URLs

# ===================================================================
# ComfyUI Configuration
# ===================================================================
COMFYUI_URL=https://jfmkqw45px5o3x-8188.proxy.runpod.net
COMFYUI_TIMEOUT=120.0

# ===================================================================
# Feature Flags
# ===================================================================
JOBS_ENABLED=true  # Enable async job queue
WEBSOCKET_ENABLED=true  # Enable WebSocket progress updates
AUTH_ENABLED=false  # Enable API key authentication (Sprint 2)
RATE_LIMIT_ENABLED=false  # Enable rate limiting (Sprint 2)

# ===================================================================
# API Configuration
# ===================================================================
API_VERSION=1.0.1
SERVICE_NAME=ComfyUI API Service
MAX_UPLOAD_SIZE=10485760  # 10MB
ENVIRONMENT=dev  # dev, staging, production

# ===================================================================
# Authentication (Sprint 2)
# ===================================================================
API_KEY_LENGTH=32  # bytes (results in 43-char base64 key)
API_KEY_TTL=31536000  # 1 year in seconds

# Role-based quotas (defined in apps/api/config.py):
# FREE: 10 jobs/day, 1 concurrent, 5 req/min
# PRO: 100 jobs/day, 3 concurrent, 20 req/min
# INTERNAL: unlimited, 10 concurrent, unlimited req/min

# ===================================================================
# Rate Limiting (Sprint 2)
# ===================================================================
RATE_LIMIT_WINDOW=60  # seconds

# ===================================================================
# Security (Production)
# ===================================================================
# CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
# ALLOWED_HOSTS=localhost,yourdomain.com,api.yourdomain.com
# TRUST_PROXY_HEADERS=true

# ===================================================================
# Monitoring
# ===================================================================
METRICS_ENABLED=true
METRICS_PATH=/metrics
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text

# ===================================================================
# External Services (Optional)
# ===================================================================
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# DD_AGENT_HOST=localhost  # Datadog APM
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ===================================================================
# Development
# ===================================================================
DEBUG=false
# RELOAD=true  # Auto-reload on code changes (dev only)
